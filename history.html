<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History - Reportify AI</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="main-header account-header">
        <div class="container">
            <a href="index.html" class="logo">
                <span class="logo-icon">üê¶</span>
                <span>Reportify AI</span>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html#features">Features</a></li>
                    <li><a href="index.html#pricing">Pricing</a></li>
                </ul>
            </nav>
            <div id="auth-container" class="header-actions"></div>
        </div>
    </header>

    <section class="generator-section" style="min-height: 80vh;">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <div>
                    <a href="account.html" class="btn-back" style="text-decoration: none; color: #666; margin-bottom: 10px; display: inline-block;">&larr; Back to Account</a>
                    <h2 class="section-title" style="text-align: left; margin: 0;">History & Reports</h2>
                </div>
                <button onclick="loadHistoryData()" style="padding: 8px 15px; background: #f3f4f6; border: 1px solid #ddd; border-radius: 5px; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>

            <div id="history-container">
                <div style="text-align: center; padding: 50px; color: #888;">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p style="margin-top: 10px;">Loading your reports...</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2026 Reportify AI. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <div id="report-view-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center; backdrop-filter: blur(4px);">
        <div style="background: white; width: 90%; max-width: 800px; max-height: 85vh; border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); display: flex; flex-direction: column; overflow: hidden; animation: fadeIn 0.3s ease;">
            
            <div style="padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background: #f9fafb;">
                <h3 id="modal-title" style="margin: 0; font-size: 1.2rem; color: #333; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">Report Details</h3>
                <button onclick="closeViewModal()" style="background: none; border: none; font-size: 24px; color: #999; cursor: pointer; padding: 0 10px;">&times;</button>
            </div>

            <div id="modal-body" style="padding: 30px; overflow-y: auto; line-height: 1.8; color: #374151; font-size: 15px;">
                </div>

            <div style="padding: 15px 20px; border-top: 1px solid #eee; text-align: right; background: white;">
                <button onclick="closeViewModal()" style="padding: 8px 20px; background: #f3f4f6; color: #555; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; margin-right: 10px;">Close</button>
                <button id="modal-copy-btn" style="padding: 8px 20px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer;">Copy Text</button>
            </div>
        </div>
    </div>

    <style>
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        /* ËÆ©ÁîüÊàêÁöÑ Markdown ÂÜÖÂÆπÂ•ΩÁúã‰∏ÄÁÇπ */
        #modal-body h1, #modal-body h2, #modal-body h3 { margin-top: 1.5em; margin-bottom: 0.5em; color: #111; }
        #modal-body ul, #modal-body ol { padding-left: 20px; }
        #modal-body p { margin-bottom: 1em; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.12.0/dist/pptxgen.bundle.js"></script>
    <script src="script.js?v=20260203"></script>
    <script src="history.js"></script>
</body>
</html>
